<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>暴雪游戏通行证</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/reg.css"/>
    <style>
       
    </style>
</head>
<body>
    <div class="reg">
        <div class="cre">创建账号</div>
        <button class="btn1">
            <a href="#">网易</a>
        </button>
        <div class="sp">或</div>
        <div class="header">
            创建暴风雪游戏通行证，开启您的冒险路程。
        </div>
            <input type="text" placeholder="身份证号码" id="uid" data-id="sfz">
            <div class="c1"></div>
            <input type="text" placeholder="姓名" name="uname" id="uname"><br>
            <input type="email" placeholder="电子邮箱" name="email" id="email"><br>
            <input type="password" placeholder="密码" name="upwd" id="upwd"><br>
            <input type="checkbox" class="ty" id="ty0">
            <label for="ty0" class="pol">我已阅读并接受隐私政策。</label>
            <br>
            <div class="sf"><a href="" id="regi">免费注册暴雪通行证</a></div>
            <div id="show"></div>
            <br>
            <div class="sf"><a href="">您已经有了通行证了？</a></div>
            <br>
           <span class="xy">
               点击“免费注册暴雪游戏通行证”即表示我同意并接受
               <a href="">暴雪战网最终用户许可协议。</a>
           </span>
    </div>
</body>
<script src="js/jquery-3.2.1.js"></script>
<script>

    $("#regi").on("click",function(e){
        e.preventDefault();
        var uid=$("#uid").val();
        var uname=$("#uname").val();
        var email=$("#email").val();
        var upwd=$("#upwd").val();
        if(uid.length!=18){$("#show").html("请输入正确格式的身份证号码！");}
        else if(email.length>18||email.length<6){$("#show").html("请输入正确格式的邮箱！");}
        else if(upwd.length<6||upwd.length>18){$("#show").html("请输入6-18位的密码！");}
        else {
            $.ajax({
                type: "post",
                data: {'uid': uid, 'uname': uname, 'email': email, 'upwd': upwd},
                url: "php/register.php",
                success: function (res) {
                     if(res=='exists'){$("#show").html("此邮箱已被注册！！")}
                     else{
                         $("#show").html("注册成功！！")
                     }
                },
                error: function () {
                    alert("网络错误！！！");
                }
            })
        }
    })
</script>
</html>